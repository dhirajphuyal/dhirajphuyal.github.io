(()=>{var t={407:()=>{}},e={};function o(r){var i=e[r];if(void 0!==i)return i.exports;var n=e[r]={exports:{}};return t[r](n,n.exports,o),n.exports}(()=>{"use strict";o(407);var t=function(t){return t*Math.PI/180},e=function(t,e,o,r,i){return(t-e)/(o-e)*(i-r)+r},r=function(t){var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?{r:parseInt(e[1],16)/255,g:parseInt(e[2],16)/255,b:parseInt(e[3],16)/255}:null};function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function n(t,e){for(var o=0;o<e.length;o++){var r=e[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,a(r.key),r)}}function s(t,e,o){return e&&n(t.prototype,e),o&&n(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t}function a(t){var e=function(t){if("object"!=i(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var o=e.call(t,"string");if("object"!=i(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==i(e)?e:e+""}var h=s((function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.geom=new THREE.ConeBufferGeometry(.3,.5,32),this.rotationX=0,this.rotationY=0,this.rotationZ=t(-180)}));function u(t,e,o,r,i){THREE.BufferGeometry.call(this),this.type="RoundedBoxGeometry",i=isNaN(i)?1:Math.max(1,Math.floor(i)),t=isNaN(t)?1:t,e=isNaN(e)?1:e,o=isNaN(o)?1:o,r=isNaN(r)?.15:r;var n=t/2-(r=Math.min(r,Math.min(t,Math.min(e,Math.min(o)))/2)),s=e/2-r,a=o/2-r;this.parameters={width:t,height:e,depth:o,radius:r,radiusSegments:i};var h,u,p,c,l=i+1,f=l*i+1<<3,d=new THREE.BufferAttribute(new Float32Array(3*f),3),y=new THREE.BufferAttribute(new Float32Array(3*f),3),m=[],v=[],w=new THREE.Vector3,g=[],b=[],E=[],R=l*i,M=l*i+1;!function(){for(var t=[new THREE.Vector3(1,1,1),new THREE.Vector3(1,1,-1),new THREE.Vector3(-1,1,-1),new THREE.Vector3(-1,1,1),new THREE.Vector3(1,-1,1),new THREE.Vector3(1,-1,-1),new THREE.Vector3(-1,-1,-1),new THREE.Vector3(-1,-1,1)],e=0;e<8;e++)m.push([]),v.push([]);for(var o=Math.PI/2,h=new THREE.Vector3(n,s,a),u=0;u<=i;u++){var p=u/i*o,c=Math.cos(p),l=Math.sin(p);if(u!=i)for(var f=0;f<=i;f++){var d=f/i*o;w.x=c*Math.cos(d),w.y=l,w.z=c*Math.sin(d);var y=w.clone().multiplyScalar(r).add(h);m[0].push(y),g.push(y);var E=w.clone().normalize();v[0].push(E),b.push(E)}else{w.set(0,1,0);var R=w.clone().multiplyScalar(r).add(h);m[0].push(R),g.push(R);var M=w.clone();v[0].push(M),b.push(M)}}for(var S=1;S<8;S++)for(e=0;e<m[0].length;e++){var T=m[0][e].clone().multiply(t[S]);m[S].push(T),g.push(T);var H=v[0][e].clone().multiply(t[S]);v[S].push(H),b.push(H)}}(),h=R,u=R+M,p=R+2*M,c=R+3*M,E.push(h),E.push(u),E.push(p),E.push(h),E.push(p),E.push(c),h=R+4*M,u=R+5*M,p=R+6*M,c=R+7*M,E.push(h),E.push(p),E.push(u),E.push(h),E.push(c),E.push(p),h=0,u=M,p=4*M,c=5*M,E.push(h),E.push(p),E.push(u),E.push(u),E.push(p),E.push(c),h=2*M,u=3*M,p=6*M,c=7*M,E.push(h),E.push(p),E.push(u),E.push(u),E.push(p),E.push(c),h=i,u=i+3*M,p=i+4*M,c=i+7*M,E.push(h),E.push(u),E.push(p),E.push(u),E.push(c),E.push(p),h=i+M,u=i+2*M,p=i+5*M,c=i+6*M,E.push(h),E.push(p),E.push(u),E.push(u),E.push(p),E.push(c),function(){for(var t=[!0,!1,!0,!1,!1,!0,!1,!0],e=l*(i-1),o=0;o<8;o++){for(var r=M*o,n=0;n<i-1;n++)for(var s=n*l,a=(n+1)*l,h=0;h<i;h++){var u=h+1,p=r+s+h,c=r+s+u,f=r+a+h,d=r+a+u;t[o]?(E.push(p),E.push(f),E.push(c),E.push(c),E.push(f),E.push(d)):(E.push(p),E.push(c),E.push(f),E.push(c),E.push(d),E.push(f))}for(var y=0;y<i;y++){var m=r+e+y,v=r+e+y+1,w=r+R;t[o]?(E.push(m),E.push(w),E.push(v)):(E.push(m),E.push(v),E.push(w))}}}(),function(){for(var t=0;t<4;t++)for(var e=t*M,o=4*M+e,r=!0&t,n=0;n<i;n++){var s=n+1,a=e+n,h=e+s,u=o+n,p=o+s;r?(E.push(a),E.push(u),E.push(h),E.push(h),E.push(u),E.push(p)):(E.push(a),E.push(h),E.push(u),E.push(h),E.push(p),E.push(u))}}(),function(){for(var t=i-1,e=[0,1,4,5],o=[3,2,7,6],r=[0,1,1,0],n=0;n<4;n++)for(var s=e[n]*M,a=o[n]*M,h=0;h<=t;h++){var u=s+i+h*l,p=s+(h!=t?i+(h+1)*l:M-1),c=a+i+h*l,f=a+(h!=t?i+(h+1)*l:M-1);r[n]?(E.push(u),E.push(c),E.push(p),E.push(p),E.push(c),E.push(f)):(E.push(u),E.push(p),E.push(c),E.push(p),E.push(f),E.push(c))}}(),function(){for(var t=[0,2,4,6],e=[1,3,5,7],o=0;o<4;o++)for(var r=M*t[o],n=M*e[o],s=1>=o,a=0;a<i;a++){var h=a*l,u=(a+1)*l,p=r+h,c=r+u,f=n+h,d=n+u;s?(E.push(p),E.push(f),E.push(c),E.push(c),E.push(f),E.push(d)):(E.push(p),E.push(c),E.push(f),E.push(c),E.push(d),E.push(f))}}();for(var S=0,T=0;T<g.length;T++)d.setXYZ(S,g[T].x,g[T].y,g[T].z),y.setXYZ(S,b[T].x,b[T].y,b[T].z),S++;this.setIndex(new THREE.BufferAttribute(new Uint16Array(E),1)),this.addAttribute("position",d),this.addAttribute("normal",y)}function p(t){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},p(t)}function c(t,e){for(var o=0;o<e.length;o++){var r=e[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,f(r.key),r)}}function l(t,e,o){return e&&c(t.prototype,e),o&&c(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t}function f(t){var e=function(t){if("object"!=p(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var o=e.call(t,"string");if("object"!=p(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==p(e)?e:e+""}u.prototype=Object.create(THREE.BufferGeometry.prototype),u.constructor=u;var d=l((function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.geom=new u(.5,.5,.5,.02,.2),this.rotationX=0,this.rotationY=0,this.rotationZ=0}));function y(t){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},y(t)}function m(t,e){for(var o=0;o<e.length;o++){var r=e[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,w(r.key),r)}}function v(t,e,o){return e&&m(t.prototype,e),o&&m(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t}function w(t){var e=function(t){if("object"!=y(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var o=e.call(t,"string");if("object"!=y(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==y(e)?e:e+""}var g=v((function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.geom=new THREE.TorusBufferGeometry(.3,.12,30,200),this.rotationX=t(90),this.rotationY=0,this.rotationZ=0}));function b(t){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},b(t)}function E(t,e){for(var o=0;o<e.length;o++){var r=e[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,R(r.key),r)}}function R(t){var e=function(t){if("object"!=b(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var o=e.call(t,"string");if("object"!=b(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==b(e)?e:e+""}(new(function(){return o=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)},(i=[{key:"setup",value:function(){this.gui=new dat.GUI,this.raycaster=new THREE.Raycaster,this.backgroundColor="#1b1b1b",this.gutter={size:1.2},this.meshes=[],this.grid={cols:15,rows:7},this.width=window.innerWidth,this.height=window.innerHeight,this.mouse3D=new THREE.Vector2,this.repulsion=1,this.geometries=[new d,new g,new h],this.gui.addFolder("Background").addColor(this,"backgroundColor").onChange((function(t){document.body.style.backgroundColor=t})),window.addEventListener("resize",this.onResize.bind(this),{passive:!0}),window.addEventListener("mousemove",this.onMouseMove.bind(this),{passive:!0}),this.onMouseMove({clientX:0,clientY:0})}},{key:"createScene",value:function(){this.scene=new THREE.Scene,this.renderer=new THREE.WebGLRenderer({antialias:!0,alpha:!0}),this.renderer.setSize(window.innerWidth,window.innerHeight),this.renderer.shadowMap.enabled=!0,this.renderer.shadowMap.type=THREE.PCFSoftShadowMap,document.body.appendChild(this.renderer.domElement)}},{key:"createCamera",value:function(){var t=window.innerWidth,e=window.innerHeight;this.camera=new THREE.PerspectiveCamera(45,t/e,1),this.camera.position.set(0,30,0),this.scene.add(this.camera)}},{key:"addAmbientLight",value:function(){var t={color:"#2900af"},e=new THREE.AmbientLight(t.color,1);this.scene.add(e),this.gui.addFolder("Ambient Light").addColor(t,"color").onChange((function(t){e.color=r(t)}))}},{key:"addSpotLight",value:function(){var t={color:"#e000ff"},e=new THREE.SpotLight(t.color,1,1e3);e.position.set(0,27,0),e.castShadow=!0,this.scene.add(e),this.gui.addFolder("Spot Light").addColor(t,"color").onChange((function(t){e.color=r(t)}))}},{key:"addRectLight",value:function(){var t={color:"#0077ff"},e=new THREE.RectAreaLight(t.color,1,2e3,2e3);e.position.set(5,50,50),e.lookAt(0,0,0),this.scene.add(e),this.gui.addFolder("Rect Light").addColor(t,"color").onChange((function(t){e.color=r(t)}))}},{key:"addPointLight",value:function(t,e){var o=new THREE.PointLight(t,1,1e3,1);o.position.set(e.x,e.y,e.z),this.scene.add(o)}},{key:"getRandomGeometry",value:function(){return this.geometries[Math.floor(Math.random()*Math.floor(this.geometries.length))]}},{key:"createGrid",value:function(){this.groupMesh=new THREE.Object3D;var t={color:"#ff00ff",metalness:.58,emissive:"#000000",roughness:.18},e=new THREE.MeshPhysicalMaterial(t),o=this.gui.addFolder("Mesh Material");o.addColor(t,"color").onChange((function(t){e.color=r(t)})),o.add(t,"metalness",.1,1).onChange((function(t){e.metalness=t})),o.add(t,"roughness",.1,1).onChange((function(t){e.roughness=t}));for(var i=0;i<this.grid.rows;i++){this.meshes[i]=[];for(var n=0;n<this.grid.cols;n++){var s=this.getRandomGeometry(),a=this.getMesh(s.geom,e);a.position.set(n+n*this.gutter.size,0,i+i*this.gutter.size),a.rotation.x=s.rotationX,a.rotation.y=s.rotationY,a.rotation.z=s.rotationZ,a.initialRotation={x:a.rotation.x,y:a.rotation.y,z:a.rotation.z},this.groupMesh.add(a),this.meshes[i][n]=a}}var h=.5*(this.grid.cols-1+(this.grid.cols-1)*this.gutter.size),u=.5*(this.grid.rows-1+(this.grid.rows-1)*this.gutter.size);this.groupMesh.position.set(-h,0,-u),this.scene.add(this.groupMesh)}},{key:"getMesh",value:function(t,e){var o=new THREE.Mesh(t,e);return o.castShadow=!0,o.receiveShadow=!0,o}},{key:"addCameraControls",value:function(){this.controls=new THREE.OrbitControls(this.camera,this.renderer.domElement)}},{key:"addFloor",value:function(){var t=new THREE.PlaneGeometry(2e3,2e3),e=new THREE.ShadowMaterial({opacity:.3});this.floor=new THREE.Mesh(t,e),this.floor.position.y=0,this.floor.rotateX(-Math.PI/2),this.floor.receiveShadow=!0,this.scene.add(this.floor)}},{key:"init",value:function(){this.setup(),this.createScene(),this.createCamera(),this.addAmbientLight(),this.addSpotLight(),this.addRectLight(),this.createGrid(),this.addCameraControls(),this.addFloor(),this.animate(),this.addPointLight(16773120,{x:0,y:10,z:-100}),this.addPointLight(16773120,{x:100,y:10,z:0}),this.addPointLight(65280,{x:20,y:5,z:20})}},{key:"onMouseMove",value:function(t){var e=t.clientX,o=t.clientY;this.mouse3D.x=e/this.width*2-1,this.mouse3D.y=-o/this.height*2+1}},{key:"onResize",value:function(){this.width=window.innerWidth,this.height=window.innerHeight,this.camera.aspect=this.width/this.height,this.camera.updateProjectionMatrix(),this.renderer.setSize(this.width,this.height)}},{key:"draw",value:function(){this.raycaster.setFromCamera(this.mouse3D,this.camera);var o,r,i,n,s=this.raycaster.intersectObjects([this.floor]);if(s.length)for(var a=s[0].point,h=a.x,u=a.z,p=0;p<this.grid.rows;p++)for(var c=0;c<this.grid.cols;c++){var l=this.meshes[p][c],f=(o=h,r=u,i=l.position.x+this.groupMesh.position.x,n=l.position.z+this.groupMesh.position.z,Math.sqrt(Math.pow(o-i,2)+Math.pow(r-n,2))),d=e(f,6,0,0,10);TweenMax.to(l.position,.2,{y:d<1?1:d});var y=l.position.y/2.5,m=y<1?1:y;TweenMax.to(l.scale,.4,{ease:Expo.easeOut,x:m,y:m,z:m}),TweenMax.to(l.rotation,.5,{ease:Expo.easeOut,x:e(l.position.y,-1,1,t(45),l.initialRotation.x),z:e(l.position.y,-1,1,t(-90),l.initialRotation.z),y:e(l.position.y,-1,1,t(90),l.initialRotation.y)})}}},{key:"animate",value:function(){this.controls.update(),this.draw(),this.renderer.render(this.scene,this.camera),requestAnimationFrame(this.animate.bind(this))}}])&&E(o.prototype,i),Object.defineProperty(o,"prototype",{writable:!1}),o;var o,i}())).init()})()})();